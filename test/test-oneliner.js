(async()=>{let p=0,f=0;console.log('%cğŸ§ª PM Cycle Test','font-size:16px;font-weight:bold;color:#4CAF50');const t=localStorage.getItem('tenant_id'),u=localStorage.getItem('user_id'),tok=localStorage.getItem('auth_token')||localStorage.getItem('token');console.log('%cğŸ“‹ Test 1: Login','font-weight:bold');t?(console.log('%câœ… Tenant:', 'color:#4CAF50',t),p++):(console.log('%câŒ Not logged in','color:#f44336'),f++);u&&(console.log('%câœ… User:', 'color:#4CAF50',u),p++);tok&&(console.log('%câœ… Token OK','color:#4CAF50'),p++);if(t&&tok){console.log('\n%cğŸ“‹ Test 2: API','font-weight:bold');try{const a=window.location.origin.includes('onrender.com')?'https://pbookspro-api.onrender.com/api':'http://localhost:3000/api',r=await fetch(`${a}/pm-cycle-allocations`,{headers:{'Authorization':`Bearer ${tok}`,'X-Tenant-ID':t}});r.ok||r.status===404?(console.log('%câœ… API OK:', 'color:#4CAF50',r.ok?`${(await r.json()).length||0} allocations`:'accessible'),p++):(console.log('%câŒ API error:', 'color:#f44336',r.status),f++)}catch(e){console.log('%câš ï¸ Network:', 'color:#ff9800',e.message),p++}}console.log('\n'+'='.repeat(50));console.log('%cğŸ“Š Results:','font-weight:bold',`âœ… ${p}`,f?`âŒ ${f}`:'');console.log('='.repeat(50));return{p,f,t:p+f}})();
